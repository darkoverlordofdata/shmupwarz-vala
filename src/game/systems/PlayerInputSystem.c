/* PlayerInputSystem.c generated by valac 0.34.4, the Vala compiler
 * generated from PlayerInputSystem.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <SDL2/SDL_events.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_video.h>
#include <SDL2/SDL_render.h>
#include <SDL2/SDL_scancode.h>


#define TYPE_DARK_MATTER (dark_matter_get_type ())
#define DARK_MATTER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DARK_MATTER, DarkMatter))
#define DARK_MATTER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DARK_MATTER, DarkMatterClass))
#define IS_DARK_MATTER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DARK_MATTER))
#define IS_DARK_MATTER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DARK_MATTER))
#define DARK_MATTER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DARK_MATTER, DarkMatterClass))

typedef struct _DarkMatter DarkMatter;
typedef struct _DarkMatterClass DarkMatterClass;
typedef struct _DarkMatterPrivate DarkMatterPrivate;

#define BOSCO_ECS_TYPE_ISYSTEM (bosco_ecs_isystem_get_type ())
#define BOSCO_ECS_ISYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ISYSTEM, BoscoECSISystem))
#define BOSCO_ECS_IS_ISYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ISYSTEM))
#define BOSCO_ECS_ISYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_ISYSTEM, BoscoECSISystemIface))

typedef struct _BoscoECSISystem BoscoECSISystem;
typedef struct _BoscoECSISystemIface BoscoECSISystemIface;

#define BOSCO_ECS_TYPE_ISET_WORLD (bosco_ecs_iset_world_get_type ())
#define BOSCO_ECS_ISET_WORLD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ISET_WORLD, BoscoECSISetWorld))
#define BOSCO_ECS_IS_ISET_WORLD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ISET_WORLD))
#define BOSCO_ECS_ISET_WORLD_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_ISET_WORLD, BoscoECSISetWorldIface))

typedef struct _BoscoECSISetWorld BoscoECSISetWorld;
typedef struct _BoscoECSISetWorldIface BoscoECSISetWorldIface;

#define BOSCO_ECS_TYPE_WORLD_BASE (bosco_ecs_world_base_get_type ())
#define BOSCO_ECS_WORLD_BASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBase))
#define BOSCO_ECS_WORLD_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBaseClass))
#define BOSCO_ECS_IS_WORLD_BASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_WORLD_BASE))
#define BOSCO_ECS_IS_WORLD_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_WORLD_BASE))
#define BOSCO_ECS_WORLD_BASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBaseClass))

typedef struct _BoscoECSWorldBase BoscoECSWorldBase;
typedef struct _BoscoECSWorldBaseClass BoscoECSWorldBaseClass;

#define BOSCO_ECS_TYPE_WORLD (bosco_ecs_world_get_type ())
#define BOSCO_ECS_WORLD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_WORLD, BoscoECSWorld))
#define BOSCO_ECS_WORLD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_WORLD, BoscoECSWorldClass))
#define BOSCO_ECS_IS_WORLD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_WORLD))
#define BOSCO_ECS_IS_WORLD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_WORLD))
#define BOSCO_ECS_WORLD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_WORLD, BoscoECSWorldClass))

typedef struct _BoscoECSWorld BoscoECSWorld;
typedef struct _BoscoECSWorldClass BoscoECSWorldClass;

#define BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM (bosco_ecs_iinitialize_system_get_type ())
#define BOSCO_ECS_IINITIALIZE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, BoscoECSIInitializeSystem))
#define BOSCO_ECS_IS_IINITIALIZE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM))
#define BOSCO_ECS_IINITIALIZE_SYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, BoscoECSIInitializeSystemIface))

typedef struct _BoscoECSIInitializeSystem BoscoECSIInitializeSystem;
typedef struct _BoscoECSIInitializeSystemIface BoscoECSIInitializeSystemIface;

#define BOSCO_ECS_TYPE_IEXECUTE_SYSTEM (bosco_ecs_iexecute_system_get_type ())
#define BOSCO_ECS_IEXECUTE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, BoscoECSIExecuteSystem))
#define BOSCO_ECS_IS_IEXECUTE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM))
#define BOSCO_ECS_IEXECUTE_SYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, BoscoECSIExecuteSystemIface))

typedef struct _BoscoECSIExecuteSystem BoscoECSIExecuteSystem;
typedef struct _BoscoECSIExecuteSystemIface BoscoECSIExecuteSystemIface;

#define TYPE_PLAYER_INPUT_SYSTEM (player_input_system_get_type ())
#define PLAYER_INPUT_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PLAYER_INPUT_SYSTEM, PlayerInputSystem))
#define PLAYER_INPUT_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PLAYER_INPUT_SYSTEM, PlayerInputSystemClass))
#define IS_PLAYER_INPUT_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PLAYER_INPUT_SYSTEM))
#define IS_PLAYER_INPUT_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PLAYER_INPUT_SYSTEM))
#define PLAYER_INPUT_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PLAYER_INPUT_SYSTEM, PlayerInputSystemClass))

typedef struct _PlayerInputSystem PlayerInputSystem;
typedef struct _PlayerInputSystemClass PlayerInputSystemClass;
typedef struct _PlayerInputSystemPrivate PlayerInputSystemPrivate;

#define BOSCO_ECS_TYPE_GROUP (bosco_ecs_group_get_type ())
#define BOSCO_ECS_GROUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_GROUP, BoscoECSGroup))
#define BOSCO_ECS_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_GROUP, BoscoECSGroupClass))
#define BOSCO_ECS_IS_GROUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_GROUP))
#define BOSCO_ECS_IS_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_GROUP))
#define BOSCO_ECS_GROUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_GROUP, BoscoECSGroupClass))

typedef struct _BoscoECSGroup BoscoECSGroup;
typedef struct _BoscoECSGroupClass BoscoECSGroupClass;

#define BOSCO_TYPE_ABSTRACT_GAME (bosco_abstract_game_get_type ())
#define BOSCO_ABSTRACT_GAME(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGame))
#define BOSCO_ABSTRACT_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGameClass))
#define BOSCO_IS_ABSTRACT_GAME(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_TYPE_ABSTRACT_GAME))
#define BOSCO_IS_ABSTRACT_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_TYPE_ABSTRACT_GAME))
#define BOSCO_ABSTRACT_GAME_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGameClass))

typedef struct _BoscoAbstractGame BoscoAbstractGame;
typedef struct _BoscoAbstractGameClass BoscoAbstractGameClass;

#define TYPE_GAME (game_get_type ())
#define GAME(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GAME, Game))
#define GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GAME, GameClass))
#define IS_GAME(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GAME))
#define IS_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GAME))
#define GAME_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GAME, GameClass))

typedef struct _Game Game;
typedef struct _GameClass GameClass;
#define _dark_matter_unref0(var) ((var == NULL) ? NULL : (var = (dark_matter_unref (var), NULL)))

#define BOSCO_ECS_TYPE_IMATCHER (bosco_ecs_imatcher_get_type ())
#define BOSCO_ECS_IMATCHER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_IMATCHER, BoscoECSIMatcher))
#define BOSCO_ECS_IS_IMATCHER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_IMATCHER))
#define BOSCO_ECS_IMATCHER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_IMATCHER, BoscoECSIMatcherIface))

typedef struct _BoscoECSIMatcher BoscoECSIMatcher;
typedef struct _BoscoECSIMatcherIface BoscoECSIMatcherIface;

#define BOSCO_ECS_TYPE_ENTITY_BASE (bosco_ecs_entity_base_get_type ())
#define BOSCO_ECS_ENTITY_BASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ENTITY_BASE, BoscoECSEntityBase))
#define BOSCO_ECS_ENTITY_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_ENTITY_BASE, BoscoECSEntityBaseClass))
#define BOSCO_ECS_IS_ENTITY_BASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ENTITY_BASE))
#define BOSCO_ECS_IS_ENTITY_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_ENTITY_BASE))
#define BOSCO_ECS_ENTITY_BASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_ENTITY_BASE, BoscoECSEntityBaseClass))

typedef struct _BoscoECSEntityBase BoscoECSEntityBase;
typedef struct _BoscoECSEntityBaseClass BoscoECSEntityBaseClass;

#define BOSCO_ECS_TYPE_ENTITY (bosco_ecs_entity_get_type ())
#define BOSCO_ECS_ENTITY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ENTITY, BoscoECSEntity))
#define BOSCO_ECS_ENTITY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_ENTITY, BoscoECSEntityClass))
#define BOSCO_ECS_IS_ENTITY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ENTITY))
#define BOSCO_ECS_IS_ENTITY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_ENTITY))
#define BOSCO_ECS_ENTITY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_ENTITY, BoscoECSEntityClass))

typedef struct _BoscoECSEntity BoscoECSEntity;
typedef struct _BoscoECSEntityClass BoscoECSEntityClass;

#define TYPE_COMPONENT (component_get_type ())

#define TYPE_POSITION_COMPONENT (position_component_get_type ())
#define POSITION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_POSITION_COMPONENT, PositionComponent))
#define POSITION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_POSITION_COMPONENT, PositionComponentClass))
#define IS_POSITION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_POSITION_COMPONENT))
#define IS_POSITION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_POSITION_COMPONENT))
#define POSITION_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_POSITION_COMPONENT, PositionComponentClass))

typedef struct _PositionComponent PositionComponent;
typedef struct _PositionComponentClass PositionComponentClass;

#define BOSCO_ECS_TYPE_ICOMPONENT (bosco_ecs_icomponent_get_type ())
#define BOSCO_ECS_ICOMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ICOMPONENT, BoscoECSIComponent))
#define BOSCO_ECS_IS_ICOMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ICOMPONENT))
#define BOSCO_ECS_ICOMPONENT_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_ICOMPONENT, BoscoECSIComponentIface))

typedef struct _BoscoECSIComponent BoscoECSIComponent;
typedef struct _BoscoECSIComponentIface BoscoECSIComponentIface;
typedef struct _PositionComponentPrivate PositionComponentPrivate;
typedef struct _BoscoAbstractGamePrivate BoscoAbstractGamePrivate;

#define BOSCO_TYPE_SPRITE (bosco_sprite_get_type ())
#define BOSCO_SPRITE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_TYPE_SPRITE, BoscoSprite))
#define BOSCO_SPRITE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_TYPE_SPRITE, BoscoSpriteClass))
#define BOSCO_IS_SPRITE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_TYPE_SPRITE))
#define BOSCO_IS_SPRITE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_TYPE_SPRITE))
#define BOSCO_SPRITE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_TYPE_SPRITE, BoscoSpriteClass))

typedef struct _BoscoSprite BoscoSprite;
typedef struct _BoscoSpriteClass BoscoSpriteClass;

struct _DarkMatter {
	GTypeInstance parent_instance;
	volatile int ref_count;
	DarkMatterPrivate * priv;
};

struct _DarkMatterClass {
	GTypeClass parent_class;
	void (*finalize) (DarkMatter *self);
};

struct _BoscoECSISystemIface {
	GTypeInterface parent_iface;
};

struct _BoscoECSISetWorldIface {
	GTypeInterface parent_iface;
	void (*setWorld) (BoscoECSISetWorld* self, BoscoECSWorld* world);
};

struct _BoscoECSIInitializeSystemIface {
	GTypeInterface parent_iface;
	void (*initialize) (BoscoECSIInitializeSystem* self);
};

struct _BoscoECSIExecuteSystemIface {
	GTypeInterface parent_iface;
	void (*execute) (BoscoECSIExecuteSystem* self);
};

struct _PlayerInputSystem {
	DarkMatter parent_instance;
	PlayerInputSystemPrivate * priv;
};

struct _PlayerInputSystemClass {
	DarkMatterClass parent_class;
};

struct _PlayerInputSystemPrivate {
	BoscoECSGroup* _group;
	BoscoECSWorld* _world;
	Game* _game;
	gboolean _mouseDown;
	gboolean _mouseDefined;
	gdouble _timeToFire;
};

struct _BoscoECSIMatcherIface {
	GTypeInterface parent_iface;
	gboolean (*matches) (BoscoECSIMatcher* self, BoscoECSEntity* entity);
	gchar* (*toString) (BoscoECSIMatcher* self);
	const gchar* (*get_id) (BoscoECSIMatcher* self);
	gint* (*get_indices) (BoscoECSIMatcher* self, int* result_length1);
};

typedef enum  {
	COMPONENT_Bounds,
	COMPONENT_Bullet,
	COMPONENT_ColorTween,
	COMPONENT_Destroy,
	COMPONENT_Enemy,
	COMPONENT_Expires,
	COMPONENT_Firing,
	COMPONENT_Health,
	COMPONENT_Layer,
	COMPONENT_Life,
	COMPONENT_Mine,
	COMPONENT_Mouse,
	COMPONENT_Player,
	COMPONENT_Position,
	COMPONENT_Resource,
	COMPONENT_ScaleTween,
	COMPONENT_Scale,
	COMPONENT_Score,
	COMPONENT_SoundEffect,
	COMPONENT_Tint,
	COMPONENT_Velocity,
	COMPONENT_TotalComponents
} Component;

typedef enum  {
	BOSCO_ECS_ECS_EXCEPTION_EntityIsNotEnabled,
	BOSCO_ECS_ECS_EXCEPTION_EntityAlreadyHasComponent,
	BOSCO_ECS_ECS_EXCEPTION_EntityDoesNotHaveComponent,
	BOSCO_ECS_ECS_EXCEPTION_EntityIsAlreadyReleased,
	BOSCO_ECS_ECS_EXCEPTION_SingleEntity,
	BOSCO_ECS_ECS_EXCEPTION_Matcher,
	BOSCO_ECS_ECS_EXCEPTION_WorldDoesNotContainEntity
} BoscoECSEcsException;
#define BOSCO_ECS_ECS_EXCEPTION bosco_ecs_ecs_exception_quark ()
struct _BoscoECSIComponentIface {
	GTypeInterface parent_iface;
};

struct _PositionComponent {
	DarkMatter parent_instance;
	PositionComponentPrivate * priv;
	gdouble x;
	gdouble y;
};

struct _PositionComponentClass {
	DarkMatterClass parent_class;
};

struct _BoscoAbstractGame {
	DarkMatter parent_instance;
	BoscoAbstractGamePrivate * priv;
	gchar* name;
	gint width;
	gint height;
	gboolean running;
	SDL_Window* window;
	SDL_Renderer* renderer;
	GPtrArray* sprites;
	guint8* keys;
	gint keys_length1;
	gboolean showFps;
};

struct _BoscoAbstractGameClass {
	DarkMatterClass parent_class;
	void (*Events) (BoscoAbstractGame* self, SDL_Event e);
	void (*Update) (BoscoAbstractGame* self, gdouble delta);
	void (*Draw) (BoscoAbstractGame* self, gdouble delta);
	void (*Dispose) (BoscoAbstractGame* self);
	gboolean (*Initialize) (BoscoAbstractGame* self);
};


static gpointer player_input_system_parent_class = NULL;
extern gdouble player_input_system_FireRate;
gdouble player_input_system_FireRate = 0.1;
static BoscoECSISystemIface* player_input_system_bosco_ecs_isystem_parent_iface = NULL;
static BoscoECSISetWorldIface* player_input_system_bosco_ecs_iset_world_parent_iface = NULL;
static BoscoECSIInitializeSystemIface* player_input_system_bosco_ecs_iinitialize_system_parent_iface = NULL;
static BoscoECSIExecuteSystemIface* player_input_system_bosco_ecs_iexecute_system_parent_iface = NULL;

gpointer dark_matter_ref (gpointer instance);
void dark_matter_unref (gpointer instance);
GParamSpec* param_spec_dark_matter (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_dark_matter (GValue* value, gpointer v_object);
void value_take_dark_matter (GValue* value, gpointer v_object);
gpointer value_get_dark_matter (const GValue* value);
GType dark_matter_get_type (void) G_GNUC_CONST;
GType bosco_ecs_isystem_get_type (void) G_GNUC_CONST;
GType bosco_ecs_world_base_get_type (void) G_GNUC_CONST;
GType bosco_ecs_world_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iset_world_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iinitialize_system_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iexecute_system_get_type (void) G_GNUC_CONST;
GType player_input_system_get_type (void) G_GNUC_CONST;
GType bosco_ecs_group_get_type (void) G_GNUC_CONST;
GType bosco_abstract_game_get_type (void) G_GNUC_CONST;
GType game_get_type (void) G_GNUC_CONST;
#define PLAYER_INPUT_SYSTEM_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_PLAYER_INPUT_SYSTEM, PlayerInputSystemPrivate))
enum  {
	PLAYER_INPUT_SYSTEM_DUMMY_PROPERTY
};
PlayerInputSystem* player_input_system_new (Game* game);
PlayerInputSystem* player_input_system_construct (GType object_type, Game* game);
DarkMatter* dark_matter_new (void);
DarkMatter* dark_matter_construct (GType object_type);
void player_input_system_onMouseEvent (PlayerInputSystem* self, SDL_EventType e, gint x, gint y);
void player_input_system_moveTo (PlayerInputSystem* self, gint x, gint y);
static void player_input_system_real_setWorld (BoscoECSISetWorld* base, BoscoECSWorld* world);
static void player_input_system_real_initialize (BoscoECSIInitializeSystem* base);
GType bosco_ecs_entity_base_get_type (void) G_GNUC_CONST;
GType bosco_ecs_entity_get_type (void) G_GNUC_CONST;
GType bosco_ecs_imatcher_get_type (void) G_GNUC_CONST;
BoscoECSGroup* bosco_ecs_world_base_getGroup (BoscoECSWorldBase* self, BoscoECSIMatcher* matcher);
BoscoECSIMatcher* bosco_ecs_matcher_AllOf (gint* args, int args_length1);
GType component_get_type (void) G_GNUC_CONST;
GQuark bosco_ecs_ecs_exception_quark (void);
BoscoECSEntity* bosco_ecs_group_getSingleEntity (BoscoECSGroup* self, GError** error);
GType position_component_get_type (void) G_GNUC_CONST;
PositionComponent* bosco_ecs_entity_get_position (BoscoECSEntity* self);
GType bosco_ecs_icomponent_get_type (void) G_GNUC_CONST;
static void player_input_system_real_execute (BoscoECSIExecuteSystem* base);
GType bosco_sprite_get_type (void) G_GNUC_CONST;
BoscoECSEntity* createBullet (gdouble x, gdouble y);
gdouble bosco_abstract_game_get_delta (BoscoAbstractGame* self);
static void player_input_system_finalize (DarkMatter* obj);


static gpointer _dark_matter_ref0 (gpointer self) {
	return self ? dark_matter_ref (self) : NULL;
}


PlayerInputSystem* player_input_system_construct (GType object_type, Game* game) {
	PlayerInputSystem* self = NULL;
	Game* _tmp0_ = NULL;
	Game* _tmp1_ = NULL;
	g_return_val_if_fail (game != NULL, NULL);
	self = (PlayerInputSystem*) dark_matter_construct (object_type);
	_tmp0_ = game;
	_tmp1_ = _dark_matter_ref0 (_tmp0_);
	_dark_matter_unref0 (self->priv->_game);
	self->priv->_game = _tmp1_;
	return self;
}


PlayerInputSystem* player_input_system_new (Game* game) {
	return player_input_system_construct (TYPE_PLAYER_INPUT_SYSTEM, game);
}


/**
     * Respond to mouse events
     */
void player_input_system_onMouseEvent (PlayerInputSystem* self, SDL_EventType e, gint x, gint y) {
	SDL_EventType _tmp0_ = 0;
	g_return_if_fail (self != NULL);
	self->priv->_mouseDefined = TRUE;
	_tmp0_ = e;
	switch (_tmp0_) {
		case SDL_MOUSEMOTION:
		{
			{
				gint _tmp1_ = 0;
				gint _tmp2_ = 0;
				_tmp1_ = x;
				_tmp2_ = y;
				player_input_system_moveTo (self, _tmp1_, _tmp2_);
			}
			break;
		}
		case SDL_MOUSEBUTTONDOWN:
		{
			{
				gint _tmp3_ = 0;
				gint _tmp4_ = 0;
				_tmp3_ = x;
				_tmp4_ = y;
				player_input_system_moveTo (self, _tmp3_, _tmp4_);
				self->priv->_mouseDown = TRUE;
			}
			break;
		}
		case SDL_MOUSEBUTTONUP:
		{
			{
				self->priv->_mouseDown = FALSE;
			}
			break;
		}
		default:
		break;
	}
}


static void player_input_system_real_setWorld (BoscoECSISetWorld* base, BoscoECSWorld* world) {
	PlayerInputSystem * self;
	BoscoECSWorld* _tmp0_ = NULL;
	BoscoECSWorld* _tmp1_ = NULL;
	self = (PlayerInputSystem*) base;
	g_return_if_fail (world != NULL);
	_tmp0_ = world;
	_tmp1_ = _dark_matter_ref0 (_tmp0_);
	_dark_matter_unref0 (self->priv->_world);
	self->priv->_world = _tmp1_;
}


static void player_input_system_real_initialize (BoscoECSIInitializeSystem* base) {
	PlayerInputSystem * self;
	BoscoECSWorld* _tmp0_ = NULL;
	gint* _tmp1_ = NULL;
	gint* _tmp2_ = NULL;
	gint _tmp2__length1 = 0;
	BoscoECSIMatcher* _tmp3_ = NULL;
	BoscoECSIMatcher* _tmp4_ = NULL;
	BoscoECSGroup* _tmp5_ = NULL;
	self = (PlayerInputSystem*) base;
	_tmp0_ = self->priv->_world;
	_tmp1_ = g_new0 (gint, 1);
	_tmp1_[0] = (gint) COMPONENT_Player;
	_tmp2_ = _tmp1_;
	_tmp2__length1 = 1;
	_tmp3_ = bosco_ecs_matcher_AllOf (_tmp2_, 1);
	_tmp4_ = _tmp3_;
	_tmp5_ = bosco_ecs_world_base_getGroup ((BoscoECSWorldBase*) _tmp0_, _tmp4_);
	_dark_matter_unref0 (self->priv->_group);
	self->priv->_group = _tmp5_;
	_dark_matter_unref0 (_tmp4_);
	_tmp2_ = (g_free (_tmp2_), NULL);
}


/**
     * Move the player
     */
void player_input_system_moveTo (PlayerInputSystem* self, gint x, gint y) {
	BoscoECSEntity* entity = NULL;
	BoscoECSGroup* _tmp0_ = NULL;
	BoscoECSEntity* _tmp1_ = NULL;
	BoscoECSEntity* _tmp2_ = NULL;
	PositionComponent* pos = NULL;
	PositionComponent* _tmp3_ = NULL;
	PositionComponent* _tmp4_ = NULL;
	PositionComponent* _tmp5_ = NULL;
	PositionComponent* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	PositionComponent* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_group;
	_tmp1_ = bosco_ecs_group_getSingleEntity (_tmp0_, &_inner_error_);
	_tmp2_ = _dark_matter_ref0 (_tmp1_);
	entity = _tmp2_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp3_ = bosco_ecs_entity_get_position (entity);
	_tmp4_ = _tmp3_;
	_tmp5_ = _dark_matter_ref0 (_tmp4_);
	pos = _tmp5_;
	_tmp6_ = pos;
	_tmp7_ = x;
	_tmp6_->x = (gdouble) _tmp7_;
	_tmp8_ = pos;
	_tmp9_ = y;
	_tmp8_->y = (gdouble) _tmp9_;
	_dark_matter_unref0 (pos);
	_dark_matter_unref0 (entity);
}


/**
     * Do the keyboard polling
     */
static void player_input_system_real_execute (BoscoECSIExecuteSystem* base) {
	PlayerInputSystem * self;
	BoscoECSEntity* entity = NULL;
	BoscoECSGroup* _tmp0_ = NULL;
	BoscoECSEntity* _tmp1_ = NULL;
	BoscoECSEntity* _tmp2_ = NULL;
	PositionComponent* pos = NULL;
	PositionComponent* _tmp3_ = NULL;
	PositionComponent* _tmp4_ = NULL;
	PositionComponent* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	gdouble _tmp26_ = 0.0;
	GError * _inner_error_ = NULL;
	self = (PlayerInputSystem*) base;
	_tmp0_ = self->priv->_group;
	_tmp1_ = bosco_ecs_group_getSingleEntity (_tmp0_, &_inner_error_);
	_tmp2_ = _dark_matter_ref0 (_tmp1_);
	entity = _tmp2_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp3_ = bosco_ecs_entity_get_position (entity);
	_tmp4_ = _tmp3_;
	_tmp5_ = _dark_matter_ref0 (_tmp4_);
	pos = _tmp5_;
	_tmp6_ = self->priv->_mouseDefined;
	if (_tmp6_) {
		gboolean _tmp7_ = FALSE;
		gboolean _tmp8_ = FALSE;
		_tmp8_ = self->priv->_mouseDown;
		if (_tmp8_) {
			_tmp7_ = TRUE;
		} else {
			Game* _tmp9_ = NULL;
			guint8* _tmp10_ = NULL;
			gint _tmp10__length1 = 0;
			guint8 _tmp11_ = 0U;
			_tmp9_ = self->priv->_game;
			_tmp10_ = ((BoscoAbstractGame*) _tmp9_)->keys;
			_tmp10__length1 = ((BoscoAbstractGame*) _tmp9_)->keys_length1;
			_tmp11_ = _tmp10_[SDL_SCANCODE_Z];
			_tmp7_ = ((gint) _tmp11_) == 1;
		}
		if (_tmp7_) {
			gdouble _tmp12_ = 0.0;
			_tmp12_ = self->priv->_timeToFire;
			if (_tmp12_ <= ((gdouble) 0)) {
				PositionComponent* _tmp13_ = NULL;
				gdouble _tmp14_ = 0.0;
				PositionComponent* _tmp15_ = NULL;
				gdouble _tmp16_ = 0.0;
				BoscoECSEntity* _tmp17_ = NULL;
				BoscoECSEntity* _tmp18_ = NULL;
				PositionComponent* _tmp19_ = NULL;
				gdouble _tmp20_ = 0.0;
				PositionComponent* _tmp21_ = NULL;
				gdouble _tmp22_ = 0.0;
				BoscoECSEntity* _tmp23_ = NULL;
				BoscoECSEntity* _tmp24_ = NULL;
				gdouble _tmp25_ = 0.0;
				_tmp13_ = pos;
				_tmp14_ = _tmp13_->x;
				_tmp15_ = pos;
				_tmp16_ = _tmp15_->y;
				_tmp17_ = createBullet (_tmp14_ - 27, _tmp16_ + 2);
				_tmp18_ = _tmp17_;
				_dark_matter_unref0 (_tmp18_);
				_tmp19_ = pos;
				_tmp20_ = _tmp19_->x;
				_tmp21_ = pos;
				_tmp22_ = _tmp21_->y;
				_tmp23_ = createBullet (_tmp20_ + 27, _tmp22_ + 2);
				_tmp24_ = _tmp23_;
				_dark_matter_unref0 (_tmp24_);
				_tmp25_ = player_input_system_FireRate;
				self->priv->_timeToFire = _tmp25_;
			}
		}
	}
	_tmp26_ = self->priv->_timeToFire;
	if (_tmp26_ > ((gdouble) 0)) {
		gdouble _tmp27_ = 0.0;
		Game* _tmp28_ = NULL;
		gdouble _tmp29_ = 0.0;
		gdouble _tmp30_ = 0.0;
		gdouble _tmp31_ = 0.0;
		_tmp27_ = self->priv->_timeToFire;
		_tmp28_ = self->priv->_game;
		_tmp29_ = bosco_abstract_game_get_delta ((BoscoAbstractGame*) _tmp28_);
		_tmp30_ = _tmp29_;
		self->priv->_timeToFire = _tmp27_ - _tmp30_;
		_tmp31_ = self->priv->_timeToFire;
		if (_tmp31_ < ((gdouble) 0)) {
			self->priv->_timeToFire = (gdouble) 0;
		}
	}
	_dark_matter_unref0 (pos);
	_dark_matter_unref0 (entity);
}


static void player_input_system_class_init (PlayerInputSystemClass * klass) {
	player_input_system_parent_class = g_type_class_peek_parent (klass);
	((DarkMatterClass *) klass)->finalize = player_input_system_finalize;
	g_type_class_add_private (klass, sizeof (PlayerInputSystemPrivate));
}


static void player_input_system_bosco_ecs_isystem_interface_init (BoscoECSISystemIface * iface) {
	player_input_system_bosco_ecs_isystem_parent_iface = g_type_interface_peek_parent (iface);
}


static void player_input_system_bosco_ecs_iset_world_interface_init (BoscoECSISetWorldIface * iface) {
	player_input_system_bosco_ecs_iset_world_parent_iface = g_type_interface_peek_parent (iface);
	iface->setWorld = (void (*)(BoscoECSISetWorld*, BoscoECSWorld*)) player_input_system_real_setWorld;
}


static void player_input_system_bosco_ecs_iinitialize_system_interface_init (BoscoECSIInitializeSystemIface * iface) {
	player_input_system_bosco_ecs_iinitialize_system_parent_iface = g_type_interface_peek_parent (iface);
	iface->initialize = (void (*)(BoscoECSIInitializeSystem*)) player_input_system_real_initialize;
}


static void player_input_system_bosco_ecs_iexecute_system_interface_init (BoscoECSIExecuteSystemIface * iface) {
	player_input_system_bosco_ecs_iexecute_system_parent_iface = g_type_interface_peek_parent (iface);
	iface->execute = (void (*)(BoscoECSIExecuteSystem*)) player_input_system_real_execute;
}


static void player_input_system_instance_init (PlayerInputSystem * self) {
	self->priv = PLAYER_INPUT_SYSTEM_GET_PRIVATE (self);
	self->priv->_mouseDefined = FALSE;
	self->priv->_timeToFire = (gdouble) 0;
}


static void player_input_system_finalize (DarkMatter* obj) {
	PlayerInputSystem * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_PLAYER_INPUT_SYSTEM, PlayerInputSystem);
	_dark_matter_unref0 (self->priv->_group);
	_dark_matter_unref0 (self->priv->_world);
	_dark_matter_unref0 (self->priv->_game);
	DARK_MATTER_CLASS (player_input_system_parent_class)->finalize (obj);
}


GType player_input_system_get_type (void) {
	static volatile gsize player_input_system_type_id__volatile = 0;
	if (g_once_init_enter (&player_input_system_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PlayerInputSystemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) player_input_system_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PlayerInputSystem), 0, (GInstanceInitFunc) player_input_system_instance_init, NULL };
		static const GInterfaceInfo bosco_ecs_isystem_info = { (GInterfaceInitFunc) player_input_system_bosco_ecs_isystem_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iset_world_info = { (GInterfaceInitFunc) player_input_system_bosco_ecs_iset_world_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iinitialize_system_info = { (GInterfaceInitFunc) player_input_system_bosco_ecs_iinitialize_system_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iexecute_system_info = { (GInterfaceInitFunc) player_input_system_bosco_ecs_iexecute_system_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType player_input_system_type_id;
		player_input_system_type_id = g_type_register_static (TYPE_DARK_MATTER, "PlayerInputSystem", &g_define_type_info, 0);
		g_type_add_interface_static (player_input_system_type_id, BOSCO_ECS_TYPE_ISYSTEM, &bosco_ecs_isystem_info);
		g_type_add_interface_static (player_input_system_type_id, BOSCO_ECS_TYPE_ISET_WORLD, &bosco_ecs_iset_world_info);
		g_type_add_interface_static (player_input_system_type_id, BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, &bosco_ecs_iinitialize_system_info);
		g_type_add_interface_static (player_input_system_type_id, BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, &bosco_ecs_iexecute_system_info);
		g_once_init_leave (&player_input_system_type_id__volatile, player_input_system_type_id);
	}
	return player_input_system_type_id__volatile;
}



