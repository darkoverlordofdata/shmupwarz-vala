/* HudRenderSystem.c generated by valac 0.34.4, the Vala compiler
 * generated from HudRenderSystem.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <SDL2/SDL_ttf.h>
#include <SDL2/SDL_render.h>
#include <SDL2/SDL_pixels.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_events.h>
#include <float.h>
#include <math.h>
#include <SDL2/SDL_video.h>


#define TYPE_DARK_MATTER (dark_matter_get_type ())
#define DARK_MATTER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DARK_MATTER, DarkMatter))
#define DARK_MATTER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DARK_MATTER, DarkMatterClass))
#define IS_DARK_MATTER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DARK_MATTER))
#define IS_DARK_MATTER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DARK_MATTER))
#define DARK_MATTER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DARK_MATTER, DarkMatterClass))

typedef struct _DarkMatter DarkMatter;
typedef struct _DarkMatterClass DarkMatterClass;
typedef struct _DarkMatterPrivate DarkMatterPrivate;

#define BOSCO_ECS_TYPE_ISYSTEM (bosco_ecs_isystem_get_type ())
#define BOSCO_ECS_ISYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ISYSTEM, BoscoECSISystem))
#define BOSCO_ECS_IS_ISYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ISYSTEM))
#define BOSCO_ECS_ISYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_ISYSTEM, BoscoECSISystemIface))

typedef struct _BoscoECSISystem BoscoECSISystem;
typedef struct _BoscoECSISystemIface BoscoECSISystemIface;

#define BOSCO_ECS_TYPE_ISET_WORLD (bosco_ecs_iset_world_get_type ())
#define BOSCO_ECS_ISET_WORLD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_ISET_WORLD, BoscoECSISetWorld))
#define BOSCO_ECS_IS_ISET_WORLD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_ISET_WORLD))
#define BOSCO_ECS_ISET_WORLD_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_ISET_WORLD, BoscoECSISetWorldIface))

typedef struct _BoscoECSISetWorld BoscoECSISetWorld;
typedef struct _BoscoECSISetWorldIface BoscoECSISetWorldIface;

#define BOSCO_ECS_TYPE_WORLD_BASE (bosco_ecs_world_base_get_type ())
#define BOSCO_ECS_WORLD_BASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBase))
#define BOSCO_ECS_WORLD_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBaseClass))
#define BOSCO_ECS_IS_WORLD_BASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_WORLD_BASE))
#define BOSCO_ECS_IS_WORLD_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_WORLD_BASE))
#define BOSCO_ECS_WORLD_BASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_WORLD_BASE, BoscoECSWorldBaseClass))

typedef struct _BoscoECSWorldBase BoscoECSWorldBase;
typedef struct _BoscoECSWorldBaseClass BoscoECSWorldBaseClass;

#define BOSCO_ECS_TYPE_WORLD (bosco_ecs_world_get_type ())
#define BOSCO_ECS_WORLD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_WORLD, BoscoECSWorld))
#define BOSCO_ECS_WORLD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_ECS_TYPE_WORLD, BoscoECSWorldClass))
#define BOSCO_ECS_IS_WORLD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_WORLD))
#define BOSCO_ECS_IS_WORLD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_ECS_TYPE_WORLD))
#define BOSCO_ECS_WORLD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_ECS_TYPE_WORLD, BoscoECSWorldClass))

typedef struct _BoscoECSWorld BoscoECSWorld;
typedef struct _BoscoECSWorldClass BoscoECSWorldClass;

#define BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM (bosco_ecs_iinitialize_system_get_type ())
#define BOSCO_ECS_IINITIALIZE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, BoscoECSIInitializeSystem))
#define BOSCO_ECS_IS_IINITIALIZE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM))
#define BOSCO_ECS_IINITIALIZE_SYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, BoscoECSIInitializeSystemIface))

typedef struct _BoscoECSIInitializeSystem BoscoECSIInitializeSystem;
typedef struct _BoscoECSIInitializeSystemIface BoscoECSIInitializeSystemIface;

#define BOSCO_ECS_TYPE_IEXECUTE_SYSTEM (bosco_ecs_iexecute_system_get_type ())
#define BOSCO_ECS_IEXECUTE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, BoscoECSIExecuteSystem))
#define BOSCO_ECS_IS_IEXECUTE_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM))
#define BOSCO_ECS_IEXECUTE_SYSTEM_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, BoscoECSIExecuteSystemIface))

typedef struct _BoscoECSIExecuteSystem BoscoECSIExecuteSystem;
typedef struct _BoscoECSIExecuteSystemIface BoscoECSIExecuteSystemIface;

#define TYPE_HUD_RENDER_SYSTEM (hud_render_system_get_type ())
#define HUD_RENDER_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HUD_RENDER_SYSTEM, HudRenderSystem))
#define HUD_RENDER_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HUD_RENDER_SYSTEM, HudRenderSystemClass))
#define IS_HUD_RENDER_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HUD_RENDER_SYSTEM))
#define IS_HUD_RENDER_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HUD_RENDER_SYSTEM))
#define HUD_RENDER_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HUD_RENDER_SYSTEM, HudRenderSystemClass))

typedef struct _HudRenderSystem HudRenderSystem;
typedef struct _HudRenderSystemClass HudRenderSystemClass;
typedef struct _HudRenderSystemPrivate HudRenderSystemPrivate;

#define BOSCO_TYPE_ABSTRACT_GAME (bosco_abstract_game_get_type ())
#define BOSCO_ABSTRACT_GAME(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGame))
#define BOSCO_ABSTRACT_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGameClass))
#define BOSCO_IS_ABSTRACT_GAME(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_TYPE_ABSTRACT_GAME))
#define BOSCO_IS_ABSTRACT_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_TYPE_ABSTRACT_GAME))
#define BOSCO_ABSTRACT_GAME_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_TYPE_ABSTRACT_GAME, BoscoAbstractGameClass))

typedef struct _BoscoAbstractGame BoscoAbstractGame;
typedef struct _BoscoAbstractGameClass BoscoAbstractGameClass;

#define TYPE_GAME (game_get_type ())
#define GAME(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GAME, Game))
#define GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GAME, GameClass))
#define IS_GAME(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GAME))
#define IS_GAME_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GAME))
#define GAME_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GAME, GameClass))

typedef struct _Game Game;
typedef struct _GameClass GameClass;

#define BOSCO_TYPE_SPRITE (bosco_sprite_get_type ())
#define BOSCO_SPRITE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOSCO_TYPE_SPRITE, BoscoSprite))
#define BOSCO_SPRITE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOSCO_TYPE_SPRITE, BoscoSpriteClass))
#define BOSCO_IS_SPRITE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOSCO_TYPE_SPRITE))
#define BOSCO_IS_SPRITE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOSCO_TYPE_SPRITE))
#define BOSCO_SPRITE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOSCO_TYPE_SPRITE, BoscoSpriteClass))

typedef struct _BoscoSprite BoscoSprite;
typedef struct _BoscoSpriteClass BoscoSpriteClass;
#define _dark_matter_unref0(var) ((var == NULL) ? NULL : (var = (dark_matter_unref (var), NULL)))
#define _TTF_CloseFont0(var) ((var == NULL) ? NULL : (var = (TTF_CloseFont (var), NULL)))
typedef struct _BoscoAbstractGamePrivate BoscoAbstractGamePrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _BoscoSpritePrivate BoscoSpritePrivate;

#define BOSCO_TYPE_SCALE (bosco_scale_get_type ())
typedef struct _BoscoScale BoscoScale;

#define BOSCO_TYPE_COLOR (bosco_color_get_type ())
typedef struct _BoscoColor BoscoColor;

#define TYPE_LAYER (layer_get_type ())

struct _DarkMatter {
	GTypeInstance parent_instance;
	volatile int ref_count;
	DarkMatterPrivate * priv;
};

struct _DarkMatterClass {
	GTypeClass parent_class;
	void (*finalize) (DarkMatter *self);
};

struct _BoscoECSISystemIface {
	GTypeInterface parent_iface;
};

struct _BoscoECSISetWorldIface {
	GTypeInterface parent_iface;
	void (*setWorld) (BoscoECSISetWorld* self, BoscoECSWorld* world);
};

struct _BoscoECSIInitializeSystemIface {
	GTypeInterface parent_iface;
	void (*initialize) (BoscoECSIInitializeSystem* self);
};

struct _BoscoECSIExecuteSystemIface {
	GTypeInterface parent_iface;
	void (*execute) (BoscoECSIExecuteSystem* self);
};

struct _HudRenderSystem {
	DarkMatter parent_instance;
	HudRenderSystemPrivate * priv;
};

struct _HudRenderSystemClass {
	DarkMatterClass parent_class;
};

struct _HudRenderSystemPrivate {
	Game* _game;
	BoscoECSWorld* _world;
	TTF_Font* _font;
	BoscoSprite* _activeEntities;
	BoscoSprite* _totalRetained;
	BoscoSprite* _totalReusable;
	SDL_Renderer* _renderer;
};

struct _BoscoAbstractGame {
	DarkMatter parent_instance;
	BoscoAbstractGamePrivate * priv;
	gchar* name;
	gint width;
	gint height;
	gboolean running;
	SDL_Window* window;
	SDL_Renderer* renderer;
	GPtrArray* sprites;
	guint8* keys;
	gint keys_length1;
	gboolean showFps;
};

struct _BoscoAbstractGameClass {
	DarkMatterClass parent_class;
	void (*Events) (BoscoAbstractGame* self, SDL_Event e);
	void (*Update) (BoscoAbstractGame* self, gdouble delta);
	void (*Draw) (BoscoAbstractGame* self, gdouble delta);
	void (*Dispose) (BoscoAbstractGame* self);
	gboolean (*Initialize) (BoscoAbstractGame* self);
};

struct _BoscoScale {
	gdouble x;
	gdouble y;
};

struct _BoscoColor {
	guint8 r;
	guint8 g;
	guint8 b;
	guint8 a;
};

struct _BoscoSprite {
	DarkMatter parent_instance;
	BoscoSpritePrivate * priv;
	SDL_Texture* texture;
	gint width;
	gint height;
	gint x;
	gint y;
	BoscoScale scale;
	BoscoColor color;
	gboolean centered;
	gint layer;
	gint id;
};

struct _BoscoSpriteClass {
	DarkMatterClass parent_class;
};

typedef enum  {
	LAYER_DEFAULT,
	LAYER_BACKGROUND,
	LAYER_TEXT,
	LAYER_LIVES,
	LAYER_MINES,
	LAYER_ACTORS_1,
	LAYER_ACTORS_2,
	LAYER_ACTORS_3,
	LAYER_PLAYER,
	LAYER_BULLET,
	LAYER_PARTICLE,
	LAYER_HUD
} Layer;


static gpointer hud_render_system_parent_class = NULL;
static BoscoECSISystemIface* hud_render_system_bosco_ecs_isystem_parent_iface = NULL;
static BoscoECSISetWorldIface* hud_render_system_bosco_ecs_iset_world_parent_iface = NULL;
static BoscoECSIInitializeSystemIface* hud_render_system_bosco_ecs_iinitialize_system_parent_iface = NULL;
static BoscoECSIExecuteSystemIface* hud_render_system_bosco_ecs_iexecute_system_parent_iface = NULL;

gpointer dark_matter_ref (gpointer instance);
void dark_matter_unref (gpointer instance);
GParamSpec* param_spec_dark_matter (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_dark_matter (GValue* value, gpointer v_object);
void value_take_dark_matter (GValue* value, gpointer v_object);
gpointer value_get_dark_matter (const GValue* value);
GType dark_matter_get_type (void) G_GNUC_CONST;
GType bosco_ecs_isystem_get_type (void) G_GNUC_CONST;
GType bosco_ecs_world_base_get_type (void) G_GNUC_CONST;
GType bosco_ecs_world_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iset_world_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iinitialize_system_get_type (void) G_GNUC_CONST;
GType bosco_ecs_iexecute_system_get_type (void) G_GNUC_CONST;
GType hud_render_system_get_type (void) G_GNUC_CONST;
GType bosco_abstract_game_get_type (void) G_GNUC_CONST;
GType game_get_type (void) G_GNUC_CONST;
GType bosco_sprite_get_type (void) G_GNUC_CONST;
#define HUD_RENDER_SYSTEM_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_HUD_RENDER_SYSTEM, HudRenderSystemPrivate))
enum  {
	HUD_RENDER_SYSTEM_DUMMY_PROPERTY
};
#define HUD_RENDER_SYSTEM_ACTIVE_ENTITIES "Active entities:         %3d"
#define HUD_RENDER_SYSTEM_TOTAL_RETAINED "Total reusable:          %3d"
#define HUD_RENDER_SYSTEM_TOTAL_REUSABLE "Total retained:          %3d"
HudRenderSystem* hud_render_system_new (Game* game);
HudRenderSystem* hud_render_system_construct (GType object_type, Game* game);
DarkMatter* dark_matter_new (void);
DarkMatter* dark_matter_construct (GType object_type);
static void hud_render_system_real_setWorld (BoscoECSISetWorld* base, BoscoECSWorld* world);
static void hud_render_system_real_initialize (BoscoECSIInitializeSystem* base);
BoscoSprite* hud_render_system_createText (HudRenderSystem* self, gint x, gint y, const gchar* text);
gint bosco_ecs_world_base_get_count (BoscoECSWorldBase* self);
gint bosco_ecs_world_base_get_reusableEntitiesCount (BoscoECSWorldBase* self);
gint bosco_ecs_world_base_get_retainedEntitiesCount (BoscoECSWorldBase* self);
static void hud_render_system_real_execute (BoscoECSIExecuteSystem* base);
void hud_render_system_setText (HudRenderSystem* self, BoscoSprite* sprite, const gchar* text);
BoscoSprite* bosco_sprite_fromRenderedText (SDL_Renderer* renderer, TTF_Font* font, const gchar* text, SDL_Color color);
GType bosco_scale_get_type (void) G_GNUC_CONST;
BoscoScale* bosco_scale_dup (const BoscoScale* self);
void bosco_scale_free (BoscoScale* self);
GType bosco_color_get_type (void) G_GNUC_CONST;
BoscoColor* bosco_color_dup (const BoscoColor* self);
void bosco_color_free (BoscoColor* self);
GType layer_get_type (void) G_GNUC_CONST;
void bosco_sprite_setText (BoscoSprite* self, SDL_Renderer* renderer, TTF_Font* font, const gchar* text, SDL_Color color);
static void hud_render_system_finalize (DarkMatter* obj);

const SDL_Color HUD_RENDER_SYSTEM_WHITE = {(guint8) 250, (guint8) 250, (guint8) 250};

static gpointer _dark_matter_ref0 (gpointer self) {
	return self ? dark_matter_ref (self) : NULL;
}


HudRenderSystem* hud_render_system_construct (GType object_type, Game* game) {
	HudRenderSystem* self = NULL;
	Game* _tmp0_ = NULL;
	Game* _tmp1_ = NULL;
	Game* _tmp2_ = NULL;
	SDL_Renderer* _tmp3_ = NULL;
	g_return_val_if_fail (game != NULL, NULL);
	self = (HudRenderSystem*) dark_matter_construct (object_type);
	_tmp0_ = game;
	_tmp1_ = _dark_matter_ref0 (_tmp0_);
	_dark_matter_unref0 (self->priv->_game);
	self->priv->_game = _tmp1_;
	_tmp2_ = self->priv->_game;
	_tmp3_ = ((BoscoAbstractGame*) _tmp2_)->renderer;
	self->priv->_renderer = _tmp3_;
	return self;
}


HudRenderSystem* hud_render_system_new (Game* game) {
	return hud_render_system_construct (TYPE_HUD_RENDER_SYSTEM, game);
}


static void hud_render_system_real_setWorld (BoscoECSISetWorld* base, BoscoECSWorld* world) {
	HudRenderSystem * self;
	BoscoECSWorld* _tmp0_ = NULL;
	BoscoECSWorld* _tmp1_ = NULL;
	self = (HudRenderSystem*) base;
	g_return_if_fail (world != NULL);
	_tmp0_ = world;
	_tmp1_ = _dark_matter_ref0 (_tmp0_);
	_dark_matter_unref0 (self->priv->_world);
	self->priv->_world = _tmp1_;
}


static void hud_render_system_real_initialize (BoscoECSIInitializeSystem* base) {
	HudRenderSystem * self;
	TTF_Font* _tmp0_ = NULL;
	TTF_Font* _tmp1_ = NULL;
	Game* _tmp2_ = NULL;
	GPtrArray* _tmp3_ = NULL;
	BoscoECSWorld* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	gint _tmp6_ = 0;
	gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	BoscoSprite* _tmp9_ = NULL;
	BoscoSprite* _tmp10_ = NULL;
	BoscoSprite* _tmp11_ = NULL;
	Game* _tmp12_ = NULL;
	GPtrArray* _tmp13_ = NULL;
	BoscoECSWorld* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	gchar* _tmp17_ = NULL;
	gchar* _tmp18_ = NULL;
	BoscoSprite* _tmp19_ = NULL;
	BoscoSprite* _tmp20_ = NULL;
	BoscoSprite* _tmp21_ = NULL;
	Game* _tmp22_ = NULL;
	GPtrArray* _tmp23_ = NULL;
	BoscoECSWorld* _tmp24_ = NULL;
	gint _tmp25_ = 0;
	gint _tmp26_ = 0;
	gchar* _tmp27_ = NULL;
	gchar* _tmp28_ = NULL;
	BoscoSprite* _tmp29_ = NULL;
	BoscoSprite* _tmp30_ = NULL;
	BoscoSprite* _tmp31_ = NULL;
	self = (HudRenderSystem*) base;
	_tmp0_ = TTF_OpenFont ("resources/Starjedi.ttf", 16);
	_TTF_CloseFont0 (self->priv->_font);
	self->priv->_font = _tmp0_;
	_tmp1_ = self->priv->_font;
	if (_tmp1_ == NULL) {
		g_print ("Failed to load font\n");
	}
	_tmp2_ = self->priv->_game;
	_tmp3_ = ((BoscoAbstractGame*) _tmp2_)->sprites;
	_tmp4_ = self->priv->_world;
	_tmp5_ = bosco_ecs_world_base_get_count ((BoscoECSWorldBase*) _tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = g_strdup_printf (HUD_RENDER_SYSTEM_ACTIVE_ENTITIES, _tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = hud_render_system_createText (self, 0, 40, _tmp8_);
	_dark_matter_unref0 (self->priv->_activeEntities);
	self->priv->_activeEntities = _tmp9_;
	_tmp10_ = self->priv->_activeEntities;
	_tmp11_ = _dark_matter_ref0 (_tmp10_);
	g_ptr_array_add (_tmp3_, _tmp11_);
	_g_free0 (_tmp8_);
	_tmp12_ = self->priv->_game;
	_tmp13_ = ((BoscoAbstractGame*) _tmp12_)->sprites;
	_tmp14_ = self->priv->_world;
	_tmp15_ = bosco_ecs_world_base_get_reusableEntitiesCount ((BoscoECSWorldBase*) _tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = g_strdup_printf (HUD_RENDER_SYSTEM_TOTAL_RETAINED, _tmp16_);
	_tmp18_ = _tmp17_;
	_tmp19_ = hud_render_system_createText (self, 0, 60, _tmp18_);
	_dark_matter_unref0 (self->priv->_totalRetained);
	self->priv->_totalRetained = _tmp19_;
	_tmp20_ = self->priv->_totalRetained;
	_tmp21_ = _dark_matter_ref0 (_tmp20_);
	g_ptr_array_add (_tmp13_, _tmp21_);
	_g_free0 (_tmp18_);
	_tmp22_ = self->priv->_game;
	_tmp23_ = ((BoscoAbstractGame*) _tmp22_)->sprites;
	_tmp24_ = self->priv->_world;
	_tmp25_ = bosco_ecs_world_base_get_retainedEntitiesCount ((BoscoECSWorldBase*) _tmp24_);
	_tmp26_ = _tmp25_;
	_tmp27_ = g_strdup_printf (HUD_RENDER_SYSTEM_TOTAL_REUSABLE, _tmp26_);
	_tmp28_ = _tmp27_;
	_tmp29_ = hud_render_system_createText (self, 0, 80, _tmp28_);
	_dark_matter_unref0 (self->priv->_totalReusable);
	self->priv->_totalReusable = _tmp29_;
	_tmp30_ = self->priv->_totalReusable;
	_tmp31_ = _dark_matter_ref0 (_tmp30_);
	g_ptr_array_add (_tmp23_, _tmp31_);
	_g_free0 (_tmp28_);
}


static void hud_render_system_real_execute (BoscoECSIExecuteSystem* base) {
	HudRenderSystem * self;
	BoscoSprite* _tmp0_ = NULL;
	BoscoECSWorld* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	gint _tmp3_ = 0;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	BoscoSprite* _tmp6_ = NULL;
	BoscoECSWorld* _tmp7_ = NULL;
	gint _tmp8_ = 0;
	gint _tmp9_ = 0;
	gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	BoscoSprite* _tmp12_ = NULL;
	BoscoECSWorld* _tmp13_ = NULL;
	gint _tmp14_ = 0;
	gint _tmp15_ = 0;
	gchar* _tmp16_ = NULL;
	gchar* _tmp17_ = NULL;
	self = (HudRenderSystem*) base;
	_tmp0_ = self->priv->_activeEntities;
	_tmp1_ = self->priv->_world;
	_tmp2_ = bosco_ecs_world_base_get_count ((BoscoECSWorldBase*) _tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = g_strdup_printf (HUD_RENDER_SYSTEM_ACTIVE_ENTITIES, _tmp3_);
	_tmp5_ = _tmp4_;
	hud_render_system_setText (self, _tmp0_, _tmp5_);
	_g_free0 (_tmp5_);
	_tmp6_ = self->priv->_totalRetained;
	_tmp7_ = self->priv->_world;
	_tmp8_ = bosco_ecs_world_base_get_retainedEntitiesCount ((BoscoECSWorldBase*) _tmp7_);
	_tmp9_ = _tmp8_;
	_tmp10_ = g_strdup_printf (HUD_RENDER_SYSTEM_TOTAL_RETAINED, _tmp9_);
	_tmp11_ = _tmp10_;
	hud_render_system_setText (self, _tmp6_, _tmp11_);
	_g_free0 (_tmp11_);
	_tmp12_ = self->priv->_totalReusable;
	_tmp13_ = self->priv->_world;
	_tmp14_ = bosco_ecs_world_base_get_reusableEntitiesCount ((BoscoECSWorldBase*) _tmp13_);
	_tmp15_ = _tmp14_;
	_tmp16_ = g_strdup_printf (HUD_RENDER_SYSTEM_TOTAL_REUSABLE, _tmp15_);
	_tmp17_ = _tmp16_;
	hud_render_system_setText (self, _tmp12_, _tmp17_);
	_g_free0 (_tmp17_);
}


BoscoSprite* hud_render_system_createText (HudRenderSystem* self, gint x, gint y, const gchar* text) {
	BoscoSprite* result = NULL;
	BoscoSprite* sprite = NULL;
	SDL_Renderer* _tmp0_ = NULL;
	TTF_Font* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	BoscoSprite* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (text != NULL, NULL);
	_tmp0_ = self->priv->_renderer;
	_tmp1_ = self->priv->_font;
	_tmp2_ = text;
	_tmp3_ = bosco_sprite_fromRenderedText (_tmp0_, _tmp1_, _tmp2_, HUD_RENDER_SYSTEM_WHITE);
	sprite = _tmp3_;
	_tmp4_ = x;
	sprite->x = _tmp4_;
	_tmp5_ = y;
	sprite->y = _tmp5_;
	sprite->layer = (gint) LAYER_HUD;
	sprite->centered = FALSE;
	result = sprite;
	return result;
}


void hud_render_system_setText (HudRenderSystem* self, BoscoSprite* sprite, const gchar* text) {
	BoscoSprite* _tmp0_ = NULL;
	SDL_Renderer* _tmp1_ = NULL;
	TTF_Font* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sprite != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = sprite;
	_tmp1_ = self->priv->_renderer;
	_tmp2_ = self->priv->_font;
	_tmp3_ = text;
	bosco_sprite_setText (_tmp0_, _tmp1_, _tmp2_, _tmp3_, HUD_RENDER_SYSTEM_WHITE);
}


static void hud_render_system_class_init (HudRenderSystemClass * klass) {
	hud_render_system_parent_class = g_type_class_peek_parent (klass);
	((DarkMatterClass *) klass)->finalize = hud_render_system_finalize;
	g_type_class_add_private (klass, sizeof (HudRenderSystemPrivate));
}


static void hud_render_system_bosco_ecs_isystem_interface_init (BoscoECSISystemIface * iface) {
	hud_render_system_bosco_ecs_isystem_parent_iface = g_type_interface_peek_parent (iface);
}


static void hud_render_system_bosco_ecs_iset_world_interface_init (BoscoECSISetWorldIface * iface) {
	hud_render_system_bosco_ecs_iset_world_parent_iface = g_type_interface_peek_parent (iface);
	iface->setWorld = (void (*)(BoscoECSISetWorld*, BoscoECSWorld*)) hud_render_system_real_setWorld;
}


static void hud_render_system_bosco_ecs_iinitialize_system_interface_init (BoscoECSIInitializeSystemIface * iface) {
	hud_render_system_bosco_ecs_iinitialize_system_parent_iface = g_type_interface_peek_parent (iface);
	iface->initialize = (void (*)(BoscoECSIInitializeSystem*)) hud_render_system_real_initialize;
}


static void hud_render_system_bosco_ecs_iexecute_system_interface_init (BoscoECSIExecuteSystemIface * iface) {
	hud_render_system_bosco_ecs_iexecute_system_parent_iface = g_type_interface_peek_parent (iface);
	iface->execute = (void (*)(BoscoECSIExecuteSystem*)) hud_render_system_real_execute;
}


static void hud_render_system_instance_init (HudRenderSystem * self) {
	self->priv = HUD_RENDER_SYSTEM_GET_PRIVATE (self);
}


static void hud_render_system_finalize (DarkMatter* obj) {
	HudRenderSystem * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_HUD_RENDER_SYSTEM, HudRenderSystem);
	_dark_matter_unref0 (self->priv->_game);
	_dark_matter_unref0 (self->priv->_world);
	_TTF_CloseFont0 (self->priv->_font);
	_dark_matter_unref0 (self->priv->_activeEntities);
	_dark_matter_unref0 (self->priv->_totalRetained);
	_dark_matter_unref0 (self->priv->_totalReusable);
	DARK_MATTER_CLASS (hud_render_system_parent_class)->finalize (obj);
}


GType hud_render_system_get_type (void) {
	static volatile gsize hud_render_system_type_id__volatile = 0;
	if (g_once_init_enter (&hud_render_system_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (HudRenderSystemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) hud_render_system_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (HudRenderSystem), 0, (GInstanceInitFunc) hud_render_system_instance_init, NULL };
		static const GInterfaceInfo bosco_ecs_isystem_info = { (GInterfaceInitFunc) hud_render_system_bosco_ecs_isystem_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iset_world_info = { (GInterfaceInitFunc) hud_render_system_bosco_ecs_iset_world_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iinitialize_system_info = { (GInterfaceInitFunc) hud_render_system_bosco_ecs_iinitialize_system_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo bosco_ecs_iexecute_system_info = { (GInterfaceInitFunc) hud_render_system_bosco_ecs_iexecute_system_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType hud_render_system_type_id;
		hud_render_system_type_id = g_type_register_static (TYPE_DARK_MATTER, "HudRenderSystem", &g_define_type_info, 0);
		g_type_add_interface_static (hud_render_system_type_id, BOSCO_ECS_TYPE_ISYSTEM, &bosco_ecs_isystem_info);
		g_type_add_interface_static (hud_render_system_type_id, BOSCO_ECS_TYPE_ISET_WORLD, &bosco_ecs_iset_world_info);
		g_type_add_interface_static (hud_render_system_type_id, BOSCO_ECS_TYPE_IINITIALIZE_SYSTEM, &bosco_ecs_iinitialize_system_info);
		g_type_add_interface_static (hud_render_system_type_id, BOSCO_ECS_TYPE_IEXECUTE_SYSTEM, &bosco_ecs_iexecute_system_info);
		g_once_init_leave (&hud_render_system_type_id__volatile, hud_render_system_type_id);
	}
	return hud_render_system_type_id__volatile;
}



